<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol handler for geo:</title>
    <!--
    <script src="main.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" title="simple"/>
    -->
  </head>
  <body>
    <h1>Protocol handler for geo:</h1>
    <p>This demonstrates how to handle protocols by local scripts.
      Care must be taken to protect against malicious URLs!</p>
    <p>Install the
      script <a href="geo-viking"><code>geo-viking</code></a>
      somewhere it can be found by Firefox.</p>
    <p>Then add the following two entries
      to <a href="about:config">about:config</a>:</p>
    <pre>
network.protocol-handler.expose.geo;false
network.protocol-handler.external.geo;true
    </pre>
    <p>Then clicking <a href="geo:47.7917,9.6079">here</a>, and choose
      the just-installed script <code>geo-viking</code> to process the
      link.</p>

    <h3>Further info</h3>
    <p>The information is stored in a
      file <code>${HOME}/.mozilla/firefox/${profile}/handlers.json</code>,
      which may look as follows:</p>
    <pre>
<span style="color:#888888">{
  "defaultHandlersVersion": {"en-US": 4},
  "mimeTypes": {"application/pdf": {"action": 3,"extensions": ["pdf"]}},
  "schemes":  {</span>
    "geo":  {
      "action": 2,
      "handlers": [
        {"name": "viking","path": "<abbr title="replace this with the real path">FIXME</abbr>/geo-viking"}
      ],
      "ask": false
    }
  <span style="color:#888888">}
}</span>
    </pre>
  </body>
</html>
